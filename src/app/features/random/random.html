<div class="random">
  <!-- Header -->
  <div class="random__header">
    <h1 class="random__title">{{ 'randomTitle' | translate }}</h1>
    <p class="random__subtitle">{{ 'randomSubtitle' | translate }}</p>
  </div>

  <!-- Genre Selector -->
  <div class="random__genre-selector">
    <button
      class="random__genre-btn"
      [class.active]="selectedGenreId === null"
      (click)="selectGenre(null)"
    >
      {{ 'anyGenre' | translate }}
    </button>
    @for (genre of genres; track genre.id) {
      <button
        class="random__genre-btn"
        [class.active]="selectedGenreId === genre.id"
        (click)="selectGenre(genre.id)"
      >
        {{ genre.translationKey ? (genre.translationKey | translate) : genre.name }}
      </button>
    }
  </div>

  <!-- Roll Button -->
  <div class="random__roll-section">
    <button
      class="random__roll-btn"
      (click)="rollMovies()"
      [disabled]="isRolling()"
      [class.rolling]="isRolling()"
    >
      <lucide-angular [img]="DicesIcon" [size]="32" class="random__dice-icon"></lucide-angular>
      <span>{{ isRolling() ? ('rolling' | translate) : showResults() ? ('rollAgain' | translate) : ('rollMovies' | translate) }}</span>
    </button>

    @if (selectedGenreId !== null) {
      <p class="random__selected-genre">
        {{ 'sortingFrom' | translate }} <strong>{{ selectedGenreName }}</strong>
      </p>
    }
  </div>

  <!-- Rolling Animation -->
  @if (isRolling()) {
    <div class="random__rolling">
      <div class="random__dice-animation">
        <lucide-angular [img]="DicesIcon" [size]="80"></lucide-angular>
      </div>
      <p class="random__rolling-text">{{ 'rollingText' | translate }}</p>
    </div>
  }

  <!-- Results -->
  @if (showResults() && !isRolling()) {
    <div class="random__results">
      <h2 class="random__results-title">
        {{ 'selectedMovies' | translate }}
      </h2>
      <div class="random__results-grid">
        @for (movie of randomMovies(); track trackByMovieId($index, movie)) {
          <div class="random__result-card">
            <app-movie-card [movie]="movie"></app-movie-card>
          </div>
        }
      </div>
    </div>
  }

  <!-- Empty State -->
  @if (!showResults() && !isRolling()) {
    <div class="random__empty">
      <lucide-angular [img]="DicesIcon" [size]="64" class="random__empty-icon"></lucide-angular>
      <p>{{ 'clickToStart' | translate }}</p>
    </div>
  }
</div>
